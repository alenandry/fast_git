<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #data{
            width: 20rem;
            height: 15rem;
            border: 1px solid royalblue;
            margin: 2rem;
        }
        #btn{
            margin-top: 2rem;
            margin-left: 2rem;
        }

    </style>
</head>
<body>
    <!-- 异步javascript 和xml (asynchronous javascript and xml) =>ajax -->
    <!--  现在传数据用json数据  json替代了xml -->

    <button id="btn">data request</button>
    <!-- 点击显示stu.json里面的数据  ,整个过程不允许页面刷新-->
    <div id="data"></div>
    <script>
        let request = function(){
        //1.create ajax obj  -- 用http协议请求xml格式数据
        let xml_request =new XMLHttpRequest()
        console.log(xml_request.readyState); //0
        //2.初始化 请求 请求方式 GET and POST
        xml_request.open('GET','./stu.json');
        console.log(xml_request.readyState);//1
        //3.发送请求
        xml_request.send() //服务器响应之后是2
        console.log(xml_request.readyState);
        //4.监听请求的状态 
        // readyState 的值发生变化 执行下面的事件
        //readyState是ajax的请求状态值0(请求未初始化) 1(请求已经初始化) 2(请求已经发送)  3(服务器已经开始响应) 4 (服务器响应完毕)
        xml_request.onreadystatechange = function(){
            if(xml_request.readyState == 4){
                console.log(xml_request.status);
                //判断状态码是否200   200表示成功  304重复请求  404地址错误
                if(xml_request.status == 200){

                }
                console.log(xml_request.statusText);
            }
        }
        console.log('监听');

        }
        let btn = document.querySelector('#btn');
        btn.addEventListener('click',request);
    </script>
    
</body>
</html>